# ES6 é‡ç‚¹çŸ¥è¯†æ€»ç»“

## 1. å˜é‡å£°æ˜ä¸ä½œç”¨åŸŸ

```javascript
// let å’Œ const
let a = 1;        // å—çº§ä½œç”¨åŸŸï¼Œå¯é‡æ–°èµ‹å€¼
const b = 2;      // å—çº§ä½œç”¨åŸŸï¼Œä¸å¯é‡æ–°èµ‹å€¼
var c = 3;        // å‡½æ•°ä½œç”¨åŸŸï¼Œå­˜åœ¨å˜é‡æå‡

// æš‚æ—¶æ€§æ­»åŒº
console.log(typeof x); // ReferenceError
let x = 1;
```

## 2. è§£æ„èµ‹å€¼

```javascript
// æ•°ç»„è§£æ„
let [a, b, ...rest] = [1, 2, 3, 4, 5];
let [x = 1, y = 2] = [3]; // é»˜è®¤å€¼

// å¯¹è±¡è§£æ„
let {name, age, city = 'Unknown'} = {name: 'Alice', age: 25};
let {name: userName, age: userAge} = {name: 'Bob', age: 30}; // é‡å‘½å

// åµŒå¥—è§£æ„
let {a: {b}} = {a: {b: 1}}; // b = 1
```

## 3. å­—ç¬¦ä¸²æ‰©å±•

```javascript
// æ¨¡æ¿å­—ç¬¦ä¸²
let name = 'Alice';
let str = `Hello, ${name}! æ¢è¡Œ
æ”¯æŒå¤šè¡Œ`;

// æ ‡ç­¾æ¨¡æ¿
function highlight(strings, ...values) {
  return strings.reduce((result, string, i) => 
    result + string + (values[i] ? `<mark>${values[i]}</mark>` : ''), '');
}

let message = highlight`Hello, ${name}!`; // Hello, <mark>Alice</mark>!

// æ–°å¢æ–¹æ³•
'hello'.startsWith('he');    // true
'hello'.endsWith('lo');      // true
'hello'.includes('ell');     // true
'hello'.repeat(3);           // hellohellohello
```

## 4. å‡½æ•°æ‰©å±•

```javascript
// ç®­å¤´å‡½æ•°
const add = (a, b) => a + b;
const square = x => x * x;
const greet = () => 'Hello';

// å‚æ•°é»˜è®¤å€¼å’Œå‰©ä½™å‚æ•°
function sum(a = 0, b = 0, ...numbers) {
  return numbers.reduce((acc, num) => acc + num, a + b);
}

// æ‰©å±•è¿ç®—ç¬¦
Math.max(...[1, 2, 3]); // 3
let arr = [...'hello']; // ['h', 'e', 'l', 'l', 'o']
```

## 5. å¯¹è±¡æ‰©å±•

```javascript
// å±æ€§ç®€å†™
let name = 'Alice', age = 25;
let obj = {name, age, sayHello() { return 'Hello'; }};

// è®¡ç®—å±æ€§å
let key = 'dynamicKey';
let obj2 = {[key]: 'value', [name + 'Age']: age};

// Object.assign()
Object.assign(target, source1, source2);

// å¯¹è±¡æ–¹æ³•
Object.keys(obj);      // è·å–é”®åæ•°ç»„
Object.values(obj);    // è·å–å€¼æ•°ç»„
Object.entries(obj);   // è·å–é”®å€¼å¯¹æ•°ç»„
Object.is(a, b);       // ä¸¥æ ¼æ¯”è¾ƒ
```

## 6. æ•°ç»„æ‰©å±•

```javascript
// Array.from() å’Œ Array.of()
Array.from('abc');           // ['a', 'b', 'c']
Array.from({length: 3});     // [undefined, undefined, undefined]
Array.of(1, 2, 3);           // [1, 2, 3]

// æ–°å¢æ–¹æ³•
[1, 2, 3].find(x => x > 1);        // 2
[1, 2, 3].findIndex(x => x > 1);   // 1
[1, 2, 3].includes(2);             // true
[1, 2, 3].fill(0, 1, 2);           // [1, 0, 3]

// æ‰©å±•è¿ç®—ç¬¦
let arr1 = [1, 2];
let arr2 = [...arr1, 3, 4]; // [1, 2, 3, 4]
```

## 7. ç±» (Class)

```javascript
class Animal {
  constructor(name) {
    this.name = name;
  }
  
  speak() {
    console.log(`${this.name} makes a sound`);
  }
  
  static getSpecies() {
    return 'Animal';
  }
}

class Dog extends Animal {
  constructor(name, breed) {
    super(name);
    this.breed = breed;
  }
  
  speak() {
    super.speak();
    console.log(`${this.name} barks`);
  }
  
  get description() {
    return `${this.name} is a ${this.breed}`;
  }
  
  set age(value) {
    this._age = value;
  }
}
```

## 8. æ¨¡å—åŒ–

```javascript
// math.js (å¯¼å‡º)
export const PI = 3.14;
export function add(a, b) { return a + b; }
export default class Calculator { /* ... */ }

// main.js (å¯¼å…¥)
import Calculator, { PI, add } from './math.js';
import * as MathUtils from './math.js';
import('./math.js').then(module => { /* åŠ¨æ€å¯¼å…¥ */ });
```

## 9. Promise

```javascript
// åˆ›å»º Promise
const promise = new Promise((resolve, reject) => {
  // å¼‚æ­¥æ“ä½œ
  setTimeout(() => {
    Math.random() > 0.5 ? resolve('success') : reject('error');
  }, 1000);
});

// ä½¿ç”¨ Promise
promise
  .then(result => console.log(result))
  .catch(error => console.error(error))
  .finally(() => console.log('å®Œæˆ'));

// é™æ€æ–¹æ³•
Promise.all([p1, p2, p3]);       // ç¬¬ä¸€ä¸ªå¤±è´¥åˆ™è¿”å›å¤±è´¥ï¼Œæ‰€æœ‰éƒ½æˆåŠŸåˆ™è¿”å›æˆåŠŸ
Promise.race([p1, p2, p3]);      // ç¬¬ä¸€ä¸ªå®Œæˆçš„ï¼Œç«æ€
Promise.allSettled([p1, p2, p3]); // ç­‰å¾…æ‰€æœ‰å®Œæˆ
Promise.any([p1, p2, p3]);        // ç¬¬ä¸€ä¸ªæˆåŠŸçš„è¿”å›æˆåŠŸï¼Œæ‰€æœ‰éƒ½å¤±è´¥åˆ™è¿”å›å¤±è´¥
```

## 10. async/await

```javascript
async function fetchData() {
  try {
    const response = await fetch('/api/data');
    const data = await response.json();
    return data;
  } catch (error) {
    console.error('è·å–æ•°æ®å¤±è´¥:', error);
    throw error;
  }
}

// å¹¶è¡Œæ‰§è¡Œ
async function parallelExecution() {
  const [users, posts, comments] = await Promise.all([
    fetch('/api/users').then(r => r.json()),
    fetch('/api/posts').then(r => r.json()),
    fetch('/api/comments').then(r => r.json())
  ]);
  return { users, posts, comments };
}
```

## 11. Set å’Œ Map

```javascript
// Set - å”¯ä¸€å€¼é›†åˆ
let set = new Set([1, 2, 3, 3]);
set.add(4).add(5);
set.has(2);     // true
set.size;       // 5
set.delete(3);  // åˆ é™¤å…ƒç´ 
set.clear();    // æ¸…ç©º

// Map - é”®å€¼å¯¹é›†åˆ
let map = new Map();
map.set('name', 'Alice');
map.set(1, 'number key');
map.get('name');    // 'Alice'
map.has('name');    // true
map.size;           // 2
map.delete('name'); // åˆ é™¤
map.clear();        // æ¸…ç©º

// WeakSet å’Œ WeakMap
let weakSet = new WeakSet();
let obj = {};
weakSet.add(obj);
```

## 12. Symbol

```javascript
// åˆ›å»º Symbol
let sym1 = Symbol('description');
let sym2 = Symbol('description');
console.log(sym1 === sym2); // false

// ä½œä¸ºå¯¹è±¡å±æ€§
let obj = {
  [sym1]: 'value',
  [Symbol.iterator]: function* () {
    yield 1; yield 2; yield 3;
  }
};

// å†…ç½® Symbol
Symbol.iterator;    // è¿­ä»£å™¨
Symbol.hasInstance; // instanceof
Symbol.toStringTag; // toString()
```

## 13. è¿­ä»£å™¨å’Œç”Ÿæˆå™¨

```javascript
// for...of å¾ªç¯
for (let item of [1, 2, 3]) {
  console.log(item);
}

// è‡ªå®šä¹‰è¿­ä»£å™¨
let obj = {
  *[Symbol.iterator]() {
    yield 1;
    yield 2;
    yield 3;
  }
};

// ç”Ÿæˆå™¨å‡½æ•°
function* gen() {
  yield 1;
  yield 2;
  return 3;
}

let g = gen();
g.next(); // {value: 1, done: false}
```

## 14. Proxy å’Œ Reflect

```javascript
// Proxy
let target = {};
let proxy = new Proxy(target, {
  get(target, property) {
    console.log(`è·å–å±æ€§ ${property}`);
    return target[property];
  },
  
  set(target, property, value) {
    console.log(`è®¾ç½®å±æ€§ ${property} = ${value}`);
    target[property] = value;
    return true;
  }
});

proxy.name = 'Alice'; // è®¾ç½®å±æ€§ name = Alice
console.log(proxy.name); // è·å–å±æ€§ name, Alice

// Reflect
Reflect.get(obj, 'name');
Reflect.set(obj, 'name', 'Bob');
Reflect.has(obj, 'name');
```

## 15. å…¶ä»–é‡è¦ç‰¹æ€§

```javascript
// æ•°å€¼æ‰©å±•
Number.isNaN(NaN);      // true
Number.isFinite(123);   // true
Math.trunc(4.9);        // 4
Math.sign(-5);          // -1

// å­—ç¬¦ä¸²ç¼–ç 
'\u{1F600}';            // ğŸ˜€
String.fromCodePoint(0x1F600); // ğŸ˜€

// æ­£åˆ™è¡¨è¾¾å¼å¢å¼º
let regex = /\p{Script=Han}+/gu; // Unicode å±æ€§
'ä½ å¥½'.match(regex); // ['ä½ å¥½']

// å°¾è°ƒç”¨ä¼˜åŒ–ï¼ˆç†è®ºï¼‰
function factorial(n, acc = 1) {
  if (n <= 1) return acc;
  return factorial(n - 1, n * acc); // å°¾è°ƒç”¨
}
```

## æ ¸å¿ƒè¦ç‚¹æ€»ç»“

âœ… **å˜é‡å£°æ˜**: ä½¿ç”¨ `let/const` æ›¿ä»£ `var`  
âœ… **å‡½æ•°**: ç®­å¤´å‡½æ•°ã€é»˜è®¤å‚æ•°ã€å‰©ä½™å‚æ•°  
âœ… **å¯¹è±¡**: å±æ€§ç®€å†™ã€è®¡ç®—å±æ€§å  
âœ… **è§£æ„**: æ•°ç»„å’Œå¯¹è±¡è§£æ„èµ‹å€¼  
âœ… **å­—ç¬¦ä¸²**: æ¨¡æ¿å­—ç¬¦ä¸²ã€æ ‡ç­¾æ¨¡æ¿  
âœ… **ç±»**: ç°ä»£é¢å‘å¯¹è±¡è¯­æ³•  
âœ… **æ¨¡å—**: æ ‡å‡†åŒ–æ¨¡å—ç³»ç»Ÿ  
âœ… **å¼‚æ­¥**: Promise å’Œ async/await  
âœ… **é›†åˆ**: Setã€Mapã€WeakSetã€WeakMap  
âœ… **è¿­ä»£**: for...ofã€ç”Ÿæˆå™¨ã€è¿­ä»£å™¨  

è¿™äº›æ˜¯ ES6 æœ€æ ¸å¿ƒå’Œå¸¸ç”¨çš„ç‰¹æ€§ï¼ŒæŒæ¡å®ƒä»¬å¯ä»¥æ˜¾è‘—æå‡ JavaScript å¼€å‘æ•ˆç‡å’Œä»£ç è´¨é‡ã€‚