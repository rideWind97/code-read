# React 时间切片原理

## 基本原理

React 时间切片（Time Slicing）是将一次大的渲染任务拆分为多个小任务，每处理一小段就检查是否有更高优先级的任务需要先执行，实现渲染可中断，提升页面流畅度。

## 调度机制

- React 内部有调度器，管理任务优先级和执行顺序
- 利用浏览器 requestIdleCallback 或 MessageChannel，在主线程空闲时分批执行任务
- 用户交互、动画等高优先级任务会被优先处理

## 伪代码

```js
while (有任务) {
  if (主线程空闲) {
    执行一小段任务
  }
  if (有高优先级任务) {
    暂停当前任务，先处理高优先级
  }
}
```

## 总结

- 时间切片让渲染可打断，避免长时间卡顿
- 用户交互优先，页面更流畅
- 适合大数据量渲染、动画等场景
